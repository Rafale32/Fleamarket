<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 여기에 이제 sql 문이들가지 mapper 안에 BoardMapper 로 했지 이걸 인터페이스이름과 같아야함 -->
<mapper namespace="com.fleamarket.mapper.PaymentMapper">
	<cache />
<!-- 	배송 정보 입력 20180816 재헌-->
	<insert id="insertDelivery" parameterType="DeliveryDTO_jh">
		insert into delivery
    (delivery_no, delivery_name, delivery_ph, delivery_address, delivery_address, delivery_contents, order_no)
    values
    (delivery_seq.nextval, #{delivery_name},#{delivery_ph},#{delivery_address},#{delivery_address2},#{delivery_contents},#{order_no});
	</insert>
  
<!--   결제에 가져올 구매자 회원정보 20180817 재헌 -->
  <select id="selectMember" parameterType="String" resultType="MemManageDTO">
<!--   test -->
    select * from member where email = 'testjwpp@gmail.com'
<!--     select * from member where email= #{email}; -->
  </select>
  
<!--   결제에 가져올 상품정보 및 판매자 정보 20180817 재헌-->
  <select id="selectItem"  parameterType="int" resultType="ItemDTO">
<!--   test -->
    select * from itemboard ib, item i, store s
    where ib.item_no = i.item_no
    and ib.store_no = s.store_no
    and ib.item_no = 1
<!--    select * from itemboard where item_no= #{item_no}; -->
  </select>
  
  <select id="listPuerchaseBoard" resultType="PuerchaseDTO_gy">
	 select distinct A.Title , S.Store_Name , Im.Thum_Img , Pa.Pay_Date
	 from pay pa, spell sp, itemBoard a , store s, itemimg im where
	 A.Store_No = S.Store_No and Im.Itemboard_No = A.Itemboard_No and Sp.Email = S.Email and
	 Pa.Spell_No = Sp.Spell_No
	</select>
	
</mapper>
